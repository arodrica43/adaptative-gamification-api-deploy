

    <style>
      #grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      #grid > div {
        font-size: 30px;
        padding: .5em;
        margin: .5em;
        text-align: center;
        width:100px;
        height:100px;
      }
      
      #grid > div > img{
         width: 100%;
         height: 100%;
         cursor: pointer;
      }
    </style>


    <div id="grid">

    </div>
    

<div id="main-content-adapt">

  	<div id="gmechanic_body"></div>


</div>

<script type="text/javascript">
    function showDetails(object){
        alert(object.name);
    }
</script>

<script>

function populateGrid(item,index){
    document.querySelector("#grid").innerHTML += '<div><img name="' + item.id + '" src="' + item.icon + '" onclick="showDetails(this);"></div>';
    document.querySelector("#grid").innerHTML += '<div><img name="' + item.id + '" src="' + item.icon + '" onclick="alert(1);"></div>';
}

fetch("called_mechanic_url")
    .then(function (response) {
        return response.json();
    })
    .then(function (myJson) {
        
        fetch("https://agmodule.herokuapp.com/api/" + myJson.mechanic + "/")
        .then(response => response.json())
        .then(res_json => (res_json.results))
        .then(function(list){
            switch(myJson.mechanic){
                case "badges":
                    list.forEach(populateGrid);
                    break;
            }
        })
        .catch(error => (console.log("Error: " + error)))
        //$(myJson.html).appendTo(document.body);
        
    })
    .catch(function (error) {
        console.log("Error: " + error);
    });
    			
</script>
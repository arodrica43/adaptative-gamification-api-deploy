

    <style>
      #grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      #grid > div {
        font-size: 30px;
        padding: .5em;
        margin: .5em;
        text-align: center;
        width:100px;
        height:100px;
      }
      
      #grid > div > img{
         width: 100%;
         height: 100%;
         cursor: pointer;
      }
    </style>


    <div id="grid">

    </div>
    

<div id="main-content-adapt">

  	<div id="gmechanic_body"></div>


</div>

<script type="text/javascript">
    function showDetails(object){
        console.log(object[1]);
        console.log(object[0].id);
    }
</script>

<script>

function populateGrid(item,index){
    console.log("Unlocked :: " + item[1]);
    if(item[1]){
        document.querySelector("#grid").innerHTML += '<div><img src="' + item[0].icon + '" onclick="showDetails(' + item + ');"></div>';
    }else{
        document.querySelector("#grid").innerHTML += '<div><img style="-webkit-filter: brightness(1%);filter: brightness(1%);" src="' + item[0].icon + '" onclick="showDetails(' + item + ');"></div>';   
    }
}

fetch("called_mechanic_url")
    .then(function (response) {
        return response.json();
    })
    .then(function (myJson) {
        if(myJson.mechanic == "badges"){
            fetch("https://agmodule.herokuapp.com/api/badges/retrieve_for_user/dynamic_user")
            .then(response => response.json())
            .then(res_json => (res_json.results))
            .then((list) => (list.forEach(populateGrid)))
            .catch(error => (console.log("Error: " + error)))
        }
    })
    .catch(function (error) {
        console.log("Error: " + error);
    });
    			
</script>


    <style>
      #grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      #grid > div {
        font-size: 30px;
        padding: .5em;
        margin: .5em;
        text-align: center;
        width:100px;
        height:100px;
      }
      
      #grid > div > img{
         width: 100%;
         height: 100%;
      }
    </style>


    <div id="grid">

    </div>
    

<div id="main-content-adapt">

  	<div id="gmechanic_body"></div>


</div>

<script>


//include_interaction_testing_tools
//var main_content_name = "main-content-adapt";
//var interactable_elements = document.getElementById(main_content_name).querySelectorAll("*");
//init_auto_interactions(interactable_elements);
//startBot(main_content_name);

function populateGrid(item,index){
    document.querySelector("#grid").innerHTML += '<div><img src="' + item.icon + '"></div>';
}

fetch("called_mechanic_url")
    .then(function (response) {
        return response.json();
    })
    .then(function (myJson) {
        
        fetch("https://agmodule.herokuapp.com/api/" + myJson.mechanic + "/")
        .then(response => response.json())
        .then(res_json => (console.log(res_json.results),res_json.results))
        .then(function(list){
            console.log(list);
            switch(myJson.mechanic){
                case "badges":
                    list.forEach(populateGrid);
                    break;
            }
        })
        .catch(error => (console.log("Error: " + error)))
        //$(myJson.html).appendTo(document.body);
        
    })
    .catch(function (error) {
        console.log("Error: " + error);
    });
    			
</script>